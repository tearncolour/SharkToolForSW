# 9. 开发指南

## 9.1 添加新命令

**插件端**：

1. 在 ElectronServer.cs 的 HandleCommandAsync 方法中添加 case：

```csharp
case "my-new-command":
    {
        var param = payload?["param"]?.ToString();
        // 执行操作
        result = new { success = true, data = "结果" };
    }
    break;
```

**客户端**：

2. 通过 IPC 调用命令：

```javascript
const result = await window.electronAPI.sendCommand('my-new-command', {
    param: 'value'
});
```

## 9.2 添加新面板

1. 创建 Vue 组件：

```vue
<!-- renderer/components/MyPanel.vue -->
<template>
  <div class="my-panel">
    <!-- 面板内容 -->
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
// 组件逻辑
</script>

<style scoped>
.my-panel {
    /* 样式 */
}
</style>
```

2. 在 App.vue 中注册：

```vue
<script setup>
import MyPanel from './components/MyPanel.vue';
</script>

<template>
  <div v-show="currentView === 'myView'" class="panel-content">
    <MyPanel />
  </div>
</template>
```

## 9.3 调试

**插件端调试**：
- 在 Visual Studio 中附加到 SLDWORKS.exe 进程
- 查看日志文件：`C:\Users\Administrator\Desktop\SharkToolForSW\debug_log.txt`

**客户端调试**：
- 使用 Chrome DevTools（Ctrl+Shift+I）
- 查看日志：`%APPDATA%\sharktools\logs\app.log`