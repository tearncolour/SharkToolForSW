# 7. 数据存储

## 7.1 插件端数据库

**位置**：`%APPDATA%\SharkTools\Database\`

**数据库文件**：
- `history.db` - 历史记录数据库
- `enhanced_history.db` - 增强历史记录数据库

**表结构**：

**records 表**：
| 字段 | 类型 | 说明 |
|------|------|------|
| Id | ObjectId | 主键 |
| RecordId | string | 记录ID |
| DocumentPath | string | 文档路径 |
| Type | string | 操作类型 |
| Name | string | 特征名称 |
| FeatureType | string | 特征类型 |
| Timestamp | DateTime | 时间戳 |
| IsImportant | bool | 重要标记 |
| Tags | List<string> | 标签 |

## 7.2 客户端存储

**electron-store**：
```javascript
const store = new Store();

// 存储设置
store.set('settings', {
    autoSaveInterval: 30,
    theme: 'dark',
    language: 'zh-CN'
});

// 存储最近文件
store.set('recentFiles', [...]);
```

## 7.3 项目配置文件

**.sharkproject**：
```json
{
    "name": "MyProject",
    "path": "C:\\Projects\\MyProject",
    "createdAt": "2024-01-01T00:00:00",
    "updatedAt": "2024-01-02T00:00:00",
    "description": "项目描述",
    "tags": ["机械", "零件"]
}
```